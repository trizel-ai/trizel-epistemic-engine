{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://trizel.ai/schemas/epistemic_state.schema.json",
  "title": "TRIZEL Phase-2 Epistemic State (Epistemic Only)",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "state_id",
    "label",
    "assumptions",
    "required_observations",
    "incompatibilities",
    "determinacy",
    "provenance"
  ],
  "properties": {
    "state_id": {
      "type": "string",
      "minLength": 1,
      "pattern": "^[A-Za-z0-9._-]+$"
    },
    "label": {
      "type": "string",
      "minLength": 1
    },
    "assumptions": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "minLength": 1
      }
    },
    "required_observations": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "minLength": 1
      }
    },
    "incompatibilities": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1,
        "pattern": "^[A-Za-z0-9._-]+$"
      }
    },
    "determinacy": {
      "type": "string",
      "enum": [
        "confirmed",
        "plausible",
        "underdetermined",
        "unfalsified",
        "falsified"
      ]
    },
    "provenance": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "ingest_doi",
        "record_ids"
      ],
      "properties": {
        "ingest_doi": {
          "type": "string",
          "const": "10.5281/zenodo.18012859"
        },
        "record_ids": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1
          }
        }
      }
    }
  },
  "allOf": [
    { "not": { "required": ["timestamp"] } },
    { "not": { "required": ["source_doi"] } },
    { "not": { "required": ["epistemic_status"] } },
    { "not": { "required": ["interpretation"] } },
    { "not": { "required": ["theory"] } },
    { "not": { "required": ["ranking"] } },
    { "not": { "required": ["stoe"] } },
    { "not": { "required": ["toe"] } }
  ]
}
