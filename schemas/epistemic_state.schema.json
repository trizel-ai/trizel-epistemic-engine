{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://trizel-ai.github.io/schemas/epistemic_state.schema.json",
  "title": "Epistemic State Schema",
  "description": "Schema for epistemic states in the TRIZEL epistemic engine (Phase-2)",
  "type": "object",
  "required": [
    "state_id",
    "timestamp",
    "source_doi",
    "epistemic_status",
    "metadata"
  ],
  "properties": {
    "state_id": {
      "type": "string",
      "description": "Unique identifier for this epistemic state",
      "pattern": "^[a-z0-9_]+_[0-9]{3,}$",
      "examples": ["3i_atlas_001", "3i_atlas_042"]
    },
    "timestamp": {
      "type": "string",
      "description": "ISO 8601 timestamp of state creation (UTC)",
      "format": "date-time",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}Z$",
      "examples": ["2025-12-22T19:52:24Z"]
    },
    "source_doi": {
      "type": "string",
      "description": "DOI reference to source data (read-only reference)",
      "pattern": "^10\\.[0-9]{4,}(\\.{0,1}[0-9]+)*\\/[^\\s]+$",
      "examples": ["10.5281/zenodo.1234567", "10.1000/xyz123"]
    },
    "epistemic_status": {
      "type": "string",
      "description": "Status of this interpretation",
      "enum": ["competing", "consensus", "rejected", "preliminary"],
      "examples": ["competing"]
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata (free-form JSON object)",
      "properties": {},
      "additionalProperties": true,
      "examples": [
        {
          "interpretation": "variant_A",
          "confidence": "medium",
          "reviewer": "anonymous"
        }
      ]
    },
    "description": {
      "type": "string",
      "description": "Human-readable description of this epistemic state",
      "maxLength": 1000,
      "examples": ["Alternative interpretation of 3I/ATLAS observational data"]
    },
    "tags": {
      "type": "array",
      "description": "Categorical tags for this state",
      "items": {
        "type": "string"
      },
      "uniqueItems": true,
      "examples": [["3I", "ATLAS", "competing_interpretation"]]
    },
    "related_states": {
      "type": "array",
      "description": "References to related epistemic states",
      "items": {
        "type": "string",
        "pattern": "^[a-z0-9_]+_[0-9]{3,}$"
      },
      "uniqueItems": true,
      "examples": [["3i_atlas_002", "3i_atlas_003"]]
    },
    "version": {
      "type": "string",
      "description": "Semantic version of this state",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
      "examples": ["1.0.0", "2.1.3"]
    }
  },
  "additionalProperties": false
}
